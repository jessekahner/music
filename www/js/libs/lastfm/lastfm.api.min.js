function LastFM(t){var e=t.apiKey||"",n=t.apiSecret||"",o=t.apiUrl||"http://ws.audioscrobbler.com/2.0/",r=t.cache||void 0;this.setApiKey=function(t){e=t},this.setApiSecret=function(t){n=t},this.setApiUrl=function(t){o=t},this.setCache=function(t){r=t};var s=function(t,e,n){if("POST"==n){var i,s=document.getElementsByTagName("html")[0],a=document.createElement("iframe");a.width=1,a.height=1,a.style.border="none",a.onload=function(){"undefined"!=typeof e.success&&e.success()},s.appendChild(a),i="undefined"!=typeof a.contentWindow?a.contentWindow.document:"undefined"!=typeof a.contentDocument.document?a.contentDocument.document.document:a.contentDocument.document,i.open(),i.clear(),i.write('<form method="post" action="'+o+'" id="form">');for(var c in t)i.write('<input type="text" name="'+c+'" value="'+t[c]+'">');i.write("</form>"),i.write('<script type="application/x-javascript">'),i.write('document.getElementById("form").submit();'),i.write("</script>"),i.close()}else{var g="jsonp"+(new Date).getTime(),f=u.getApiSignature(t);if("undefined"!=typeof r&&r.contains(f)&&!r.isExpired(f))return"undefined"!=typeof e.success&&e.success(r.load(f)),void 0;t.callback=g,t.format="json",window[g]=function(n){if("undefined"!=typeof r){var o=r.getExpirationTime(t);o>0&&r.store(f,n,o)}"undefined"!=typeof n.error?"undefined"!=typeof e.error&&e.error(n.error,n.message):"undefined"!=typeof e.success&&e.success(n),window[g]=void 0;try{delete window[g]}catch(i){}T&&T.removeChild(p)};var T=document.getElementsByTagName("head")[0],p=document.createElement("script"),l=[];for(var c in t)l.push(encodeURIComponent(c)+"="+encodeURIComponent(t[c]));p.src=o+"?"+l.join("&").replace(/%20/g,"+"),T.appendChild(p)}},a=function(t,n,o,i){n=n||{},o=o||{},i=i||"GET",n.method=t,n.api_key=e,s(n,o,i)},c=function(t,n,o,i,r){n=n||{},i=i||{},r=r||"GET",n.method=t,n.api_key=e,o&&"undefined"!=typeof o.key&&(n.sk=o.key),n.api_sig=u.getApiSignature(n),s(n,i,r)};this.album={addTags:function(t,e,n){"object"==typeof t.tags&&(t.tags=t.tags.join(",")),c("album.addTags",t,e,n,"POST")},getBuylinks:function(t,e){a("album.getBuylinks",t,e)},getInfo:function(t,e){a("album.getInfo",t,e)},getTags:function(t,e,n){c("album.getTags",t,e,n)},removeTag:function(t,e,n){c("album.removeTag",t,e,n,"POST")},search:function(t,e){a("album.search",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),c("album.share",t,n)}},this.artist={addTags:function(t,e,n){"object"==typeof t.tags&&(t.tags=t.tags.join(",")),c("artist.addTags",t,e,n,"POST")},getCorrection:function(t,e){a("artist.getCorrection",t,e)},getEvents:function(t,e){a("artist.getEvents",t,e)},getImages:function(t,e){a("artist.getImages",t,e)},getInfo:function(t,e){a("artist.getInfo",t,e)},getPastEvents:function(t,e){a("artist.getPastEvents",t,e)},getPodcast:function(t,e){a("artist.getPodcast",t,e)},getShouts:function(t,e){a("artist.getShouts",t,e)},getSimilar:function(t,e){a("artist.getSimilar",t,e)},getTags:function(t,e,n){c("artist.getTags",t,e,n)},getTopAlbums:function(t,e){a("artist.getTopAlbums",t,e)},getTopFans:function(t,e){a("artist.getTopFans",t,e)},getTopTags:function(t,e){a("artist.getTopTags",t,e)},getTopTracks:function(t,e){a("artist.getTopTracks",t,e)},removeTag:function(t,e,n){c("artist.removeTag",t,e,n,"POST")},search:function(t,e){a("artist.search",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),c("artist.share",t,e,n,"POST")},shout:function(t,e,n){c("artist.shout",t,e,n,"POST")}},this.auth={getMobileSession:function(t,e){t={username:t.username,authToken:md5(t.username+md5(t.password))},c("auth.getMobileSession",t,null,e)},getSession:function(t,e){c("auth.getSession",t,null,e)},getToken:function(t){c("auth.getToken",null,null,t)},getWebSession:function(t){var e=o;o="http://ext.last.fm/2.0/",c("auth.getWebSession",null,null,t),o=e}},this.chart={getHypedArtists:function(t,e,n){a("chart.getHypedArtists",t,n)},getHypedTracks:function(t,e,n){a("chart.getHypedTracks",t,n)},getLovedTracks:function(t,e,n){a("chart.getLovedTracks",t,n)},getTopArtists:function(t,e,n){a("chart.getTopArtists",t,n)},getTopTags:function(t,e,n){a("chart.getTopTags",t,n)},getTopTracks:function(t,e,n){a("chart.getTopTracks",t,n)}},this.event={attend:function(t,e,n){c("event.attend",t,e,n,"POST")},getAttendees:function(t,e,n){a("event.getAttendees",t,n)},getInfo:function(t,e){a("event.getInfo",t,e)},getShouts:function(t,e){a("event.getShouts",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),c("event.share",t,e,n,"POST")},shout:function(t,e,n){c("event.shout",t,e,n,"POST")}},this.geo={getEvents:function(t,e){a("geo.getEvents",t,e)},getMetroArtistChart:function(t,e){a("geo.getMetroArtistChart",t,e)},getMetroHypeArtistChart:function(t,e){a("geo.getMetroHypeArtistChart",t,e)},getMetroHypeTrackChart:function(t,e){a("geo.getMetroHypeTrackChart",t,e)},getMetroTrackChart:function(t,e){a("geo.getMetroTrackChart",t,e)},getMetroUniqueArtistChart:function(t,e){a("geo.getMetroUniqueArtistChart",t,e)},getMetroUniqueTrackChart:function(t,e){a("geo.getMetroUniqueTrackChart",t,e)},getMetroWeeklyChartlist:function(t,e){a("geo.getMetroWeeklyChartlist",t,e)},getMetros:function(t,e){a("geo.getMetros",t,e)},getTopArtists:function(t,e){a("geo.getTopArtists",t,e)},getTopTracks:function(t,e){a("geo.getTopTracks",t,e)}},this.group={getHype:function(t,e){a("group.getHype",t,e)},getMembers:function(t,e){a("group.getMembers",t,e)},getWeeklyAlbumChart:function(t,e){a("group.getWeeklyAlbumChart",t,e)},getWeeklyArtistChart:function(t,e){a("group.getWeeklyArtistChart",t,e)},getWeeklyChartList:function(t,e){a("group.getWeeklyChartList",t,e)},getWeeklyTrackChart:function(t,e){a("group.getWeeklyTrackChart",t,e)}},this.library={addAlbum:function(t,e,n){c("library.addAlbum",t,e,n,"POST")},addArtist:function(t,e,n){c("library.addArtist",t,e,n,"POST")},addTrack:function(t,e,n){c("library.addTrack",t,e,n,"POST")},getAlbums:function(t,e){a("library.getAlbums",t,e)},getArtists:function(t,e){a("library.getArtists",t,e)},getTracks:function(t,e){a("library.getTracks",t,e)}},this.playlist={addTrack:function(t,e,n){c("playlist.addTrack",t,e,n,"POST")},create:function(t,e,n){c("playlist.create",t,e,n,"POST")},fetch:function(t,e){a("playlist.fetch",t,e)}},this.radio={getPlaylist:function(t,e,n){c("radio.getPlaylist",t,e,n)},search:function(t,e,n){c("radio.search",t,e,n)},tune:function(t,e,n){c("radio.tune",t,e,n)}},this.tag={getInfo:function(t,e){a("tag.getInfo",t,e)},getSimilar:function(t,e){a("tag.getSimilar",t,e)},getTopAlbums:function(t,e){a("tag.getTopAlbums",t,e)},getTopArtists:function(t,e){a("tag.getTopArtists",t,e)},getTopTags:function(t){a("tag.getTopTags",null,t)},getTopTracks:function(t,e){a("tag.getTopTracks",t,e)},getWeeklyArtistChart:function(t,e){a("tag.getWeeklyArtistChart",t,e)},getWeeklyChartList:function(t,e){a("tag.getWeeklyChartList",t,e)},search:function(t,e){a("tag.search",t,e)}},this.tasteometer={compare:function(t,e){a("tasteometer.compare",t,e)},compareGroup:function(t,e){a("tasteometer.compareGroup",t,e)}},this.track={addTags:function(t,e,n){c("track.addTags",t,e,n,"POST")},ban:function(t,e,n){c("track.ban",t,e,n,"POST")},getBuylinks:function(t,e){a("track.getBuylinks",t,e)},getCorrection:function(t,e){a("track.getCorrection",t,e)},getFingerprintMetadata:function(t,e){a("track.getFingerprintMetadata",t,e)},getInfo:function(t,e){a("track.getInfo",t,e)},getShouts:function(t,e){a("track.getShouts",t,e)},getSimilar:function(t,e){a("track.getSimilar",t,e)},getTags:function(t,e,n){c("track.getTags",t,e,n)},getTopFans:function(t,e){a("track.getTopFans",t,e)},getTopTags:function(t,e){a("track.getTopTags",t,e)},love:function(t,e,n){c("track.love",t,e,n,"POST")},removeTag:function(t,e,n){c("track.removeTag",t,e,n,"POST")},scrobble:function(t,e){if(-1!=t.constructor.toString().indexOf("Array")){var n={};for(i in t)for(j in t[i])n[j+"["+i+"]"]=t[i][j];t=n}c("track.scrobble",t,session,e,"POST")},search:function(t,e){a("track.search",t,e)},share:function(t,e,n){"object"==typeof t.recipient&&(t.recipient=t.recipient.join(",")),c("track.share",t,e,n,"POST")},unban:function(t,e,n){c("track.unban",t,e,n,"POST")},unlove:function(t,e,n){c("track.unlove",t,e,n,"POST")},updateNowPlaying:function(t,e,n){c("track.updateNowPlaying",t,e,n,"POST")}},this.user={getArtistTracks:function(t,e){a("user.getArtistTracks",t,e)},getBannedTracks:function(t,e){a("user.getBannedTracks",t,e)},getEvents:function(t,e){a("user.getEvents",t,e)},getFriends:function(t,e){a("user.getFriends",t,e)},getInfo:function(t,e){a("user.getInfo",t,e)},getLovedTracks:function(t,e){a("user.getLovedTracks",t,e)},getNeighbours:function(t,e){a("user.getNeighbours",t,e)},getNewReleases:function(t,e){a("user.getNewReleases",t,e)},getPastEvents:function(t,e){a("user.getPastEvents",t,e)},getPersonalTracks:function(t,e){a("user.getPersonalTracks",t,e)},getPlaylists:function(t,e){a("user.getPlaylists",t,e)},getRecentStations:function(t,e,n){c("user.getRecentStations",t,e,n)},getRecentTracks:function(t,e){a("user.getRecentTracks",t,e)},getRecommendedArtists:function(t,e,n){c("user.getRecommendedArtists",t,e,n)},getRecommendedEvents:function(t,e,n){c("user.getRecommendedEvents",t,e,n)},getShouts:function(t,e){a("user.getShouts",t,e)},getTopAlbums:function(t,e){a("user.getTopAlbums",t,e)},getTopArtists:function(t,e){a("user.getTopArtists",t,e)},getTopTags:function(t,e){a("user.getTopTags",t,e)},getTopTracks:function(t,e){a("user.getTopTracks",t,e)},getWeeklyAlbumChart:function(t,e){a("user.getWeeklyAlbumChart",t,e)},getWeeklyArtistChart:function(t,e){a("user.getWeeklyArtistChart",t,e)},getWeeklyChartList:function(t,e){a("user.getWeeklyChartList",t,e)},getWeeklyTrackChart:function(t,e){a("user.getWeeklyTrackChart",t,e)},shout:function(t,e,n){c("user.shout",t,e,n,"POST")}},this.venue={getEvents:function(t,e){a("venue.getEvents",t,e)},getPastEvents:function(t,e){a("venue.getPastEvents",t,e)},search:function(t,e){a("venue.search",t,e)}};var u={getApiSignature:function(t){var e=[],o="";for(var i in t)e.push(i);e.sort();for(var r in e){var i=e[r];o+=i+t[i]}return o+=n,md5(o)}}}
